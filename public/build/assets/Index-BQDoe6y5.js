import{_ as z}from"./AppLayout-BMi79edI.js";import{c as v,w as a,r as B,R as A,S as D,g as t,o,d as b,b as s,a as i,j as F,h as r,e as k,f as x,F as P,i as R,t as g,n as q,y as w}from"./app-CwqbuaoV.js";import{_ as E,a as L,b as $,c as p,d as M,e as f}from"./TableHeader-DUTRpwyL.js";import{_ as T}from"./Card-di3Gb9u6.js";import{_}from"./index-BYXQZvXk.js";import{D as U,_ as G,a as H,b as J,c as K}from"./DialogTitle--WiQzZXd.js";import{p as Q}from"./createLucideIcon-CPcqOnVP.js";import"./ApplicationMark-CZiei0DI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-CYy-q1Wy.js";import"./utils-shxNTvJ-.js";const W={__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(y){const u=y;return(m,d)=>(o(),v(t(U),A(D(u)),{default:a(()=>[B(m.$slots,"default")]),_:3},16))}};/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=Q("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Y={class:"py-8 max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"rounded-md border border-gray-200 dark:border-neutral-800 overflow-hidden"},h={class:"mt-6 flex justify-center gap-3"},ee={class:"relative"},te=["src"],me={__name:"Index",props:{orders:Object},setup(y){const u=y,m=b(!1),d=b([]),c=b(0);function S(n){d.value=(n.orderItems||[]).map(e=>e.menu?.picture).filter(Boolean),d.value.length?(m.value=!0,c.value=0):alert("No images for this order")}function O(){c.value<d.value.length-1?c.value++:c.value=0}function j(n){switch(n){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}const N=n=>{w.post(route("orders.updateStatus",n),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const e=u.orders.data.find(l=>l.id===n);e&&(e.status==="pending"?e.status="approved":e.status==="approved"&&(e.status="accepted"))}})},I=n=>{w.delete(route("orders.destroy",n),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const e=u.orders.data.find(l=>l.id===n);e&&(e.status="rejected")}})};return(n,e)=>(o(),v(z,{title:"Orders"},{header:a(()=>[...e[3]||(e[3]=[i("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-100 leading-tight"},"Orders",-1)])]),default:a(()=>[s(t(F),{title:"Orders"}),i("div",Y,[s(t(T),{class:"p-6 space-y-6"},{default:a(()=>[e[14]||(e[14]=i("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"All Orders",-1)),i("div",Z,[s(t(E),null,{default:a(()=>[s(t(L),null,{default:a(()=>[s(t($),{class:"bg-gray-50 dark:bg-neutral-800"},{default:a(()=>[s(t(p),{class:"w-12 text-left"},{default:a(()=>[...e[4]||(e[4]=[r("#",-1)])]),_:1}),s(t(p),null,{default:a(()=>[...e[5]||(e[5]=[r("Guest/User",-1)])]),_:1}),s(t(p),null,{default:a(()=>[...e[6]||(e[6]=[r("Status",-1)])]),_:1}),s(t(p),null,{default:a(()=>[...e[7]||(e[7]=[r("Total",-1)])]),_:1}),s(t(p),null,{default:a(()=>[...e[8]||(e[8]=[r("Items",-1)])]),_:1}),s(t(p),null,{default:a(()=>[...e[9]||(e[9]=[r("Action",-1)])]),_:1})]),_:1})]),_:1}),s(t(M),null,{default:a(()=>[(o(!0),k(P,null,R(u.orders.data,(l,V)=>(o(),v(t($),{key:l.id,class:"hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors"},{default:a(()=>[s(t(f),null,{default:a(()=>[r(g(V+1),1)]),_:2},1024),s(t(f),null,{default:a(()=>[r(g(l.guest?l.guest.name:l.user?l.user.name:"N/A"),1)]),_:2},1024),s(t(f),null,{default:a(()=>[i("span",{class:q(`px-2 py-1 rounded-full text-sm font-medium ${j(l.status)}`)},g(l.status),3)]),_:2},1024),s(t(f),null,{default:a(()=>[r("$"+g(l.total.toFixed(2)),1)]),_:2},1024),s(t(f),null,{default:a(()=>[s(t(_),{size:"sm",variant:"outline",onClick:C=>S(l)},{default:a(()=>[s(t(X),{class:"w-5 h-5"})]),_:1},8,["onClick"])]),_:2},1024),s(t(f),{class:"flex gap-2"},{default:a(()=>[s(t(_),{size:"sm",variant:"outline",disabled:l.status==="accepted",onClick:C=>N(l.id)},{default:a(()=>[r(g(l.status==="pending"?"Approve":"Accept"),1)]),_:2},1032,["disabled","onClick"]),l.status!=="accepted"&&l.status!=="rejected"?(o(),v(t(_),{key:0,size:"sm",variant:"destructive",onClick:C=>I(l.id)},{default:a(()=>[...e[10]||(e[10]=[r(" Reject ",-1)])]),_:1},8,["onClick"])):x("",!0)]),_:2},1024)]),_:2},1024))),128)),u.orders.data.length===0?(o(),v(t($),{key:0},{default:a(()=>[s(t(f),{colspan:"6",class:"text-center py-6 text-gray-500 dark:text-gray-400"},{default:a(()=>[...e[11]||(e[11]=[r(" No orders found. ",-1)])]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1})]),i("div",h,[s(t(_),{variant:"outline",disabled:!u.orders.prev_page_url,onClick:e[0]||(e[0]=l=>n.$inertia.get(u.orders.prev_page_url))},{default:a(()=>[...e[12]||(e[12]=[r(" Previous ",-1)])]),_:1},8,["disabled"]),s(t(_),{variant:"outline",disabled:!u.orders.next_page_url,onClick:e[1]||(e[1]=l=>n.$inertia.get(u.orders.next_page_url))},{default:a(()=>[...e[13]||(e[13]=[r(" Next ",-1)])]),_:1},8,["disabled"])])]),_:1})]),s(t(G),{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=l=>m.value=l)},{default:a(()=>[s(t(H),{class:"max-w-lg"},{default:a(()=>[s(t(J),null,{default:a(()=>[s(t(K),null,{default:a(()=>[...e[15]||(e[15]=[r("Order Items",-1)])]),_:1}),s(t(W))]),_:1}),i("div",ee,[d.value.length?(o(),k("img",{key:0,src:`/storage/${d.value[c.value]}`,class:"w-full h-64 object-cover rounded-md"},null,8,te)):x("",!0),d.value.length>1?(o(),k("button",{key:1,onClick:O,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white px-3 py-1 rounded-full"}," Next ")):x("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{me as default};
