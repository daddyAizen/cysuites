import{A as $,d as v,u as w,c as C,w as d,a as e,e as m,f as p,b as a,o as i,t as n,g as s,h as c,F as P,i as S,k as D}from"./app-CwqbuaoV.js";import{_ as N}from"./AppLayout-BMi79edI.js";import{_}from"./index-BYXQZvXk.js";import{_ as b}from"./Input-MrDL1z9k.js";import{_ as E}from"./Textarea-C75wZKOK.js";import{_ as U,a as A,b as B,c as M}from"./DialogTitle--WiQzZXd.js";import{_ as F}from"./DialogFooter-cA5LgsZa.js";import"./ApplicationMark-CZiei0DI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-CYy-q1Wy.js";import"./utils-shxNTvJ-.js";import"./createLucideIcon-CPcqOnVP.js";const h={class:"p-8 max-w-6xl mx-auto space-y-6"},j={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert"},z={class:"block sm:inline"},I={class:"flex justify-between items-center"},L={class:"rounded-xl border bg-card text-card-foreground shadow overflow-x-auto"},T={class:"w-full border-collapse min-w-[700px]"},q={class:"p-4"},G={class:"p-4 line-clamp-2"},H={class:"p-4"},J={class:"p-4"},K={class:"p-4 text-right"},O={key:0},Q={key:0,class:"text-red-500 text-sm mt-1"},R={key:0,class:"text-red-500 text-sm mt-1"},W={class:"grid grid-cols-2 gap-4"},X={key:0,class:"text-red-500 text-sm mt-1"},Y={key:0,class:"text-red-500 text-sm mt-1"},pt={__name:"Index",props:{promotions:Array},setup(x){$();const u=v(!1),f=v(!1),g=v(null),o=w({id:null,name:"",description:"",start_date:"",end_date:""}),k=()=>{f.value=!1,o.reset(),u.value=!0},y=r=>{f.value=!0,g.value=r,o.id=r.id,o.name=r.name,o.description=r.description,o.start_date=r.start_date,o.end_date=r.end_date,u.value=!0},V=()=>{f.value?o.put(route("promotions.update",o.id),{preserveScroll:!0,onSuccess:()=>{u.value=!1}}):o.post(route("promotions.store"),{preserveScroll:!0,onSuccess:()=>{u.value=!1}})};return(r,t)=>(i(),C(N,null,{default:d(()=>[e("div",h,[r.successMessage?(i(),m("div",j,[t[7]||(t[7]=e("strong",{class:"font-bold"},"Success!",-1)),e("span",z,n(r.successMessage),1),e("span",{onClick:t[0]||(t[0]=l=>r.successMessage=null),class:"absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer"}," âœ• ")])):p("",!0),e("div",I,[t[9]||(t[9]=e("h1",{class:"text-3xl font-semibold tracking-tight"},"Promotions",-1)),a(s(_),{onClick:k},{default:d(()=>[...t[8]||(t[8]=[c("+ Add Promotion",-1)])]),_:1})]),e("div",L,[e("table",T,[t[12]||(t[12]=e("thead",{class:"bg-muted/50"},[e("tr",null,[e("th",{class:"text-left p-4 font-medium"},"Name"),e("th",{class:"text-left p-4 font-medium"},"Description"),e("th",{class:"text-left p-4 font-medium"},"Start Date"),e("th",{class:"text-left p-4 font-medium"},"End Date"),e("th",{class:"text-right p-4 font-medium"},"Actions")])],-1)),e("tbody",null,[(i(!0),m(P,null,S(x.promotions,l=>(i(),m("tr",{key:l.id,class:"border-t hover:bg-muted/30 transition"},[e("td",q,n(l.name),1),e("td",G,n(l.description),1),e("td",H,n(l.start_date),1),e("td",J,n(l.end_date),1),e("td",K,[a(s(_),{variant:"outline",size:"sm",onClick:Z=>y(l)},{default:d(()=>[...t[10]||(t[10]=[c("Edit",-1)])]),_:1},8,["onClick"])])]))),128)),x.promotions.length===0?(i(),m("tr",O,[...t[11]||(t[11]=[e("td",{colspan:"5",class:"p-6 text-center text-muted-foreground"},"No promotions yet.",-1)])])):p("",!0)])])]),a(s(U),{open:u.value,"onUpdate:open":t[6]||(t[6]=l=>u.value=l)},{default:d(()=>[a(s(A),{class:"sm:max-w-lg"},{default:d(()=>[a(s(B),null,{default:d(()=>[a(s(M),null,{default:d(()=>[c(n(f.value?"Edit Promotion":"Add Promotion"),1)]),_:1})]),_:1}),e("form",{onSubmit:D(V,["prevent"]),class:"space-y-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium mb-1"},"Name",-1)),a(s(b),{modelValue:s(o).name,"onUpdate:modelValue":t[1]||(t[1]=l=>s(o).name=l),placeholder:"Promotion name"},null,8,["modelValue"]),s(o).errors.name?(i(),m("div",Q,n(s(o).errors.name),1)):p("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium mb-1"},"Description",-1)),a(s(E),{modelValue:s(o).description,"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).description=l),placeholder:"Promotion description"},null,8,["modelValue"]),s(o).errors.description?(i(),m("div",R,n(s(o).errors.description),1)):p("",!0)]),e("div",W,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium mb-1"},"Start Date",-1)),a(s(b),{type:"date",modelValue:s(o).start_date,"onUpdate:modelValue":t[3]||(t[3]=l=>s(o).start_date=l)},null,8,["modelValue"]),s(o).errors.start_date?(i(),m("div",X,n(s(o).errors.start_date),1)):p("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium mb-1"},"End Date",-1)),a(s(b),{type:"date",modelValue:s(o).end_date,"onUpdate:modelValue":t[4]||(t[4]=l=>s(o).end_date=l)},null,8,["modelValue"]),s(o).errors.end_date?(i(),m("div",Y,n(s(o).errors.end_date),1)):p("",!0)])]),a(s(F),{class:"flex justify-end gap-3 mt-4"},{default:d(()=>[a(s(_),{type:"button",variant:"outline",onClick:t[5]||(t[5]=l=>u.value=!1)},{default:d(()=>[...t[17]||(t[17]=[c("Cancel",-1)])]),_:1}),a(s(_),{type:"submit",disabled:s(o).processing},{default:d(()=>[c(n(s(o).processing?"Saving...":f.value?"Update Promotion":"Create Promotion"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])])]),_:1}))}};export{pt as default};
