import{_ as I}from"./AppLayout-ceQOplm5.js";import{c as v,w as s,r as A,R as B,S as D,g as t,o as d,d as y,b as a,a as i,j as V,h as r,e as k,f as x,F,i as P,t as p,n as R,y as w}from"./app-DD0hfv4c.js";import{_ as q,a as E,b as $,c,d as L,e as f}from"./TableHeader-BgXOY0Fb.js";import{_ as M}from"./Card-B_uvIjos.js";import{_}from"./index-CIgvVq52.js";import{D as T,_ as U,a as G,b as H,c as J}from"./DialogTitle-B8F04W9s.js";import{p as K}from"./createLucideIcon-CMNRGVf-.js";import"./ResponsiveNavLink-XUw0AWZq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-VLubNG-8.js";import"./utils-DYeITWNS.js";const Q={__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(b){const u=b;return(m,o)=>(d(),v(t(T),B(D(u)),{default:s(()=>[A(m.$slots,"default")]),_:3},16))}};/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=K("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),X={class:"py-8 max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"rounded-md border border-gray-200 dark:border-neutral-800 overflow-hidden"},Z={class:"mt-6 flex justify-center gap-3"},ee={class:"relative"},te=["src"],ce={__name:"Index",props:{orders:Object},setup(b){const u=b,m=y(!1),o=y([]),g=y(0);function S(n){console.log(n.order_items.length),o.value=(n.order_items||[]).map(e=>e.menu).filter(e=>e&&e.picture),console.log(o.value),o.value.length?(m.value=!0,g.value=0):alert("No images for this order")}function O(){g.value<o.value.length-1?g.value++:g.value=0}function j(n){switch(n){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}const N=n=>{w.post(route("orders.updateStatus",n),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const e=u.orders.data.find(l=>l.id===n);e&&(e.status==="pending"?e.status="approved":e.status==="approved"&&(e.status="accepted"))}})},h=n=>{w.delete(route("orders.destroy",n),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const e=u.orders.data.find(l=>l.id===n);e&&(e.status="rejected")}})};return(n,e)=>(d(),v(I,{title:"Orders"},{header:s(()=>[...e[3]||(e[3]=[i("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-100 leading-tight"},"Orders",-1)])]),default:s(()=>[a(t(V),{title:"Orders"}),i("div",X,[a(t(M),{class:"p-6 space-y-6"},{default:s(()=>[e[14]||(e[14]=i("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"All Orders",-1)),i("div",Y,[a(t(q),null,{default:s(()=>[a(t(E),null,{default:s(()=>[a(t($),{class:"bg-gray-50 dark:bg-neutral-800"},{default:s(()=>[a(t(c),{class:"w-12 text-left"},{default:s(()=>[...e[4]||(e[4]=[r("#",-1)])]),_:1}),a(t(c),null,{default:s(()=>[...e[5]||(e[5]=[r("Guest/User",-1)])]),_:1}),a(t(c),null,{default:s(()=>[...e[6]||(e[6]=[r("Status",-1)])]),_:1}),a(t(c),null,{default:s(()=>[...e[7]||(e[7]=[r("Total",-1)])]),_:1}),a(t(c),null,{default:s(()=>[...e[8]||(e[8]=[r("Items",-1)])]),_:1}),a(t(c),null,{default:s(()=>[...e[9]||(e[9]=[r("Action",-1)])]),_:1})]),_:1})]),_:1}),a(t(L),null,{default:s(()=>[(d(!0),k(F,null,P(u.orders.data,(l,z)=>(d(),v(t($),{key:l.id,class:"hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors"},{default:s(()=>[a(t(f),null,{default:s(()=>[r(p(z+1),1)]),_:2},1024),a(t(f),null,{default:s(()=>[r(p(l.guest?l.guest.name:l.user?l.user.name:"N/A"),1)]),_:2},1024),a(t(f),null,{default:s(()=>[i("span",{class:R(`px-2 py-1 rounded-full text-sm font-medium ${j(l.status)}`)},p(l.status),3)]),_:2},1024),a(t(f),null,{default:s(()=>[r("$"+p(l.total.toFixed(2)),1)]),_:2},1024),a(t(f),null,{default:s(()=>[a(t(_),{size:"sm",variant:"outline",onClick:C=>S(l)},{default:s(()=>[a(t(W),{class:"w-5 h-5"})]),_:1},8,["onClick"])]),_:2},1024),a(t(f),{class:"flex gap-2"},{default:s(()=>[a(t(_),{size:"sm",class:"bg-blue-600 text-white hover:bg-blue-700",variant:"outline",disabled:l.status==="accepted",onClick:C=>N(l.id)},{default:s(()=>[r(p(l.status==="pending"?"Approve":"Accept"),1)]),_:2},1032,["disabled","onClick"]),l.status!=="accepted"&&l.status!=="rejected"?(d(),v(t(_),{key:0,size:"sm",variant:"destructive",class:"bg-red-600 text-white hover:bg-red-700",onClick:C=>h(l.id)},{default:s(()=>[...e[10]||(e[10]=[r(" Reject ",-1)])]),_:1},8,["onClick"])):x("",!0)]),_:2},1024)]),_:2},1024))),128)),u.orders.data.length===0?(d(),v(t($),{key:0},{default:s(()=>[a(t(f),{colspan:"6",class:"text-center py-6 text-gray-500 dark:text-gray-400"},{default:s(()=>[...e[11]||(e[11]=[r(" No orders found. ",-1)])]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1})]),i("div",Z,[a(t(_),{variant:"outline",disabled:!u.orders.prev_page_url,onClick:e[0]||(e[0]=l=>n.$inertia.get(u.orders.prev_page_url))},{default:s(()=>[...e[12]||(e[12]=[r(" Previous ",-1)])]),_:1},8,["disabled"]),a(t(_),{variant:"outline",disabled:!u.orders.next_page_url,onClick:e[1]||(e[1]=l=>n.$inertia.get(u.orders.next_page_url))},{default:s(()=>[...e[13]||(e[13]=[r(" Next ",-1)])]),_:1},8,["disabled"])])]),_:1})]),a(t(U),{open:m.value,"onUpdate:open":e[2]||(e[2]=l=>m.value=l)},{default:s(()=>[a(t(G),{class:"max-w-lg"},{default:s(()=>[a(t(H),null,{default:s(()=>[a(t(J),null,{default:s(()=>[r("Order Items ("+p(o.value.length)+")",1)]),_:1}),a(t(Q))]),_:1}),i("div",ee,[o.value.length?(d(),k("img",{key:0,src:o.value[g.value].picture_url,class:"w-full h-64 object-cover rounded-md"},null,8,te)):x("",!0),o.value.length>1?(d(),k("button",{key:1,onClick:O,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white px-3 py-1 rounded-full"}," Next ")):x("",!0)])]),_:1})]),_:1},8,["open"])]),_:1}))}};export{ce as default};
