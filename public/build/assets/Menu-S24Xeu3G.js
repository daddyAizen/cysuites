import{A as O,d as g,u as E,m as v,c as F,w as i,a as t,e as n,b as d,g as c,o as r,F as y,i as w,f as m,t as a,T as k,h as N}from"./app-DD0hfv4c.js";import{_ as B}from"./GuestLayout-CI01RBCW.js";import{_ as K,a as V,b as I,c as M}from"./DialogTitle-B8F04W9s.js";import{_ as A}from"./DialogFooter-DZwwvNYv.js";import"./ResponsiveNavLink-XUw0AWZq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-VLubNG-8.js";import"./createLucideIcon-CMNRGVf-.js";import"./utils-DYeITWNS.js";const P={class:"max-w-6xl mx-auto py-10 px-4"},q={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"},D={class:"relative"},L=["src"],U={class:"absolute top-3 left-3 bg-green-600 text-white text-xs font-semibold px-3 py-1 rounded-xl"},z={class:"p-4 flex flex-col justify-between"},G={class:"text-lg font-semibold text-gray-900 mb-1"},H={class:"text-sm text-gray-600 mb-3 line-clamp-2"},J={class:"flex items-center justify-between mt-auto"},Q={class:"flex items-center space-x-3"},R=["onClick"],W={class:"text-lg font-medium text-gray-800 w-6 text-center"},X=["onClick"],Y={key:1,class:"text-center text-gray-500 text-lg mt-10"},Z={class:"font-semibold mr-3"},ee={class:"space-y-4 mt-4"},te=["src"],se={class:"flex-1"},oe={class:"font-medium text-gray-800"},le={class:"text-sm text-gray-600"},ae={class:"font-semibold text-gray-700"},re={class:"flex justify-between items-center pt-3"},ne={class:"font-bold text-green-700 text-xl"},ie=["disabled"],de={key:0,class:"fixed bottom-10 right-6 bg-green-600 text-white px-6 py-3 rounded-xl shadow-lg text-sm"},ye={__name:"Menu",setup(ce){const p=O().props.menus||[],l=g({}),f=g(!1),u=g(!1),x=g(!1),b=E({orders:[]}),C=o=>l.value[o]=(l.value[o]||0)+1,$=o=>{l.value[o]>0&&(l.value[o]-=1)},_=v(()=>Object.values(l.value).reduce((o,s)=>o+s,0)),h=v(()=>p.filter(o=>l.value[o.id]>0)),j=v(()=>h.value.reduce((o,s)=>o+s.price*l.value[s.id],0)),S=()=>{const o=Object.entries(l.value).filter(([s,e])=>e>0).map(([s,e])=>({menu_id:parseInt(s),quantity:e}));o.length&&(f.value=!0,b.orders=o,b.post(route("guests.orders.store"),{onFinish:()=>f.value=!1,onSuccess:()=>{l.value={},u.value=!1,x.value=!0,setTimeout(()=>x.value=!1,2500),alert("Order placed successfully!")}}))};return(o,s)=>(r(),F(B,null,{default:i(()=>[t("div",P,[s[6]||(s[6]=t("h2",{class:"text-3xl font-bold mb-8 text-center text-gray-800"}," Today's Menu ",-1)),c(p).length?(r(),n("div",q,[(r(!0),n(y,null,w(c(p),e=>(r(),n("div",{key:e.id,class:"bg-white rounded-md shadow-md overflow-hidden hover:shadow-xl transition relative"},[t("div",D,[e.picture?(r(),n("img",{key:0,src:`/storage/${e.picture}`,alt:"Food Image",class:"h-44 w-full object-cover"},null,8,L)):m("",!0),t("span",U," KES "+a(e.price),1)]),t("div",z,[t("div",null,[t("h3",G,a(e.name),1),t("p",H,a(e.description),1)]),t("div",J,[t("div",Q,[t("button",{onClick:T=>$(e.id),class:"bg-gray-200 hover:bg-gray-300 rounded-full h-8 w-8 flex items-center justify-center text-gray-700"}," âˆ’ ",8,R),t("span",W,a(l.value[e.id]||0),1),t("button",{onClick:T=>C(e.id),class:"bg-green-600 hover:bg-green-700 text-white rounded-full h-8 w-8 flex items-center justify-center"}," + ",8,X)])])])]))),128))])):(r(),n("div",Y," No menu items available right now. ")),d(k,{name:"fade"},{default:i(()=>[_.value>0?(r(),n("div",{key:0,class:"fixed bottom-6 right-6 bg-green-600 text-white rounded-full shadow-lg flex items-center px-6 py-3 cursor-pointer hover:bg-green-700 transition",onClick:s[0]||(s[0]=e=>u.value=!0)},[t("span",Z," ðŸ›’ "+a(_.value)+" item"+a(_.value>1?"s":""),1),s[3]||(s[3]=t("button",{class:"bg-white text-green-700 font-bold px-4 py-1 rounded-full"}," Checkout ",-1))])):m("",!0)]),_:1}),d(c(K),{open:u.value,"onUpdate:open":s[2]||(s[2]=e=>u.value=e)},{default:i(()=>[d(c(V),{class:"max-w-lg rounded-2xl shadow-lg bg-white p-6"},{default:i(()=>[d(c(I),null,{default:i(()=>[d(c(M),{class:"text-2xl font-semibold text-gray-800"},{default:i(()=>[...s[4]||(s[4]=[N("Checkout",-1)])]),_:1})]),_:1}),t("div",ee,[(r(!0),n(y,null,w(h.value,e=>(r(),n("div",{key:e.id,class:"flex items-center gap-4 border-b pb-3"},[e.picture?(r(),n("img",{key:0,src:`/storage/${e.picture}`,class:"h-14 w-14 object-cover rounded-md"},null,8,te)):m("",!0),t("div",se,[t("p",oe,a(e.name),1),t("p",le,a(l.value[e.id])+" Ã— KES "+a(e.price),1)]),t("p",ae," KES "+a(e.price*l.value[e.id]),1)]))),128)),t("div",re,[s[5]||(s[5]=t("span",{class:"font-semibold text-gray-800 text-lg"},"Total:",-1)),t("span",ne,"KES "+a(j.value),1)])]),d(c(A),{class:"mt-6 flex justify-end space-x-3"},{default:i(()=>[t("button",{onClick:s[1]||(s[1]=e=>u.value=!1),class:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-5 py-2 rounded-lg font-medium"}," Cancel "),t("button",{onClick:S,disabled:f.value,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold"},a(f.value?"Placing...":"Confirm Order"),9,ie)]),_:1})]),_:1})]),_:1},8,["open"]),d(k,{name:"fade"},{default:i(()=>[x.value?(r(),n("div",de)):m("",!0)]),_:1})])]),_:1}))}};export{ye as default};
