import{A as M,d as x,m as f,u as I,c as B,w as i,a as e,e as r,b as d,h as k,g as c,o as n,F as S,i as $,f as _,t as a,T as E}from"./app-CwqbuaoV.js";import{_ as D}from"./AppLayout-BMi79edI.js";import{_ as P,a as V,b as A,c as U}from"./DialogTitle--WiQzZXd.js";import{_ as q}from"./DialogFooter-cA5LgsZa.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationMark-CZiei0DI.js";import"./NavLink-CYy-q1Wy.js";import"./createLucideIcon-CPcqOnVP.js";import"./utils-shxNTvJ-.js";const L={class:"max-w-6xl mx-auto py-10 px-4"},R={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"},Y=["src"],z={class:"absolute top-3 left-3 bg-green-600 text-white text-xs font-semibold px-3 py-1 rounded-full"},H={class:"p-4 flex flex-col justify-between"},J={class:"text-lg font-semibold text-gray-900 mb-1"},Q={class:"text-sm text-gray-600 mb-3 line-clamp-2"},W={class:"flex items-center justify-between mt-auto"},X={class:"flex items-center space-x-3"},Z=["onClick"],ee={class:"text-lg font-medium text-gray-800 w-6 text-center"},te=["onClick"],se={key:1,class:"text-center text-gray-500 text-lg mt-10"},oe={class:"font-semibold mr-3"},ae={class:"space-y-4 mt-4"},le=["src"],ne={class:"flex-1"},re={class:"font-medium text-gray-800"},ie={class:"text-sm text-gray-600"},de={class:"line-through text-gray-400"},ce={class:"ml-1 text-green-700 font-semibold"},ue={class:"font-semibold text-gray-700"},fe={class:"pt-3 border-t mt-3"},me={class:"text-xs text-gray-600"},ge={class:"flex justify-between items-center pt-3 border-t mt-3"},pe={class:"font-bold text-green-700 text-xl"},xe=["disabled"],_e={key:0,class:"fixed bottom-10 right-10 bg-green-600 text-white px-5 py-3 rounded-lg shadow-lg text-sm font-medium"},ve=35,be={__name:"StaffMenu",setup(he){const v=M().props.menus||[],l=x({}),m=x(!1),u=x(!1),g=x(""),b=f(()=>v.filter(o=>l.value[o.id]>0)),h=f(()=>Object.values(l.value).reduce((o,t)=>o+t,0)),p=o=>Math.round(o-o*ve/100),j=f(()=>b.value.reduce((o,t)=>o+t.price*l.value[t.id],0)),y=f(()=>b.value.reduce((o,t)=>o+p(t.price)*l.value[t.id],0)),T=f(()=>j.value-y.value),O=o=>l.value[o]=(l.value[o]||0)+1,N=o=>{l.value[o]>0&&(l.value[o]-=1)},C=o=>{g.value=o,setTimeout(()=>g.value="",3e3)},w=I({orders:[],total:0}),F=()=>{const o=Object.entries(l.value).filter(([t,s])=>s>0).map(([t,s])=>({menu_id:parseInt(t),quantity:s}));o.length&&(m.value=!0,w.orders=o,w.total=y.value,w.post(route("orders.store"),{onFinish:()=>m.value=!1,onSuccess:()=>{l.value={},u.value=!1,C("âœ… Order placed successfully!")},onError:()=>C("âŒ Failed to place order. Try again.")}))};return(o,t)=>(n(),B(D,null,{default:i(()=>[e("div",L,[t[8]||(t[8]=e("h2",{class:"text-3xl font-bold mb-4 text-center text-gray-800"},[k(" Staff Menu "),e("p",{class:"text-sm font-medium text-gray-600"}," Discount: 35% ")],-1)),c(v).length?(n(),r("div",R,[(n(!0),r(S,null,$(c(v),s=>(n(),r("div",{key:s.id,class:"bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-xl transition relative"},[s.picture?(n(),r("img",{key:0,src:`/storage/${s.picture}`,alt:"Food Image",class:"h-44 w-full object-cover"},null,8,Y)):_("",!0),e("span",z," KES "+a(p(s.price)),1),e("div",H,[e("div",null,[e("h3",J,a(s.name),1),e("p",Q,a(s.description),1),t[3]||(t[3]=e("p",{class:"text-xs text-green-700 font-medium italic"}," 35% off ",-1))]),e("div",W,[e("div",X,[e("button",{onClick:K=>N(s.id),class:"bg-gray-200 hover:bg-gray-300 rounded-full h-8 w-8 flex items-center justify-center text-gray-700"}," âˆ’ ",8,Z),e("span",ee,a(l.value[s.id]||0),1),e("button",{onClick:K=>O(s.id),class:"bg-green-600 hover:bg-green-700 text-white rounded-full h-8 w-8 flex items-center justify-center"}," + ",8,te)])])])]))),128))])):(n(),r("div",se," No menu items available. ")),d(E,{name:"fade"},{default:i(()=>[h.value>0?(n(),r("div",{key:0,class:"fixed bottom-6 right-6 bg-green-600 text-white rounded-full shadow-lg flex items-center px-6 py-3 cursor-pointer hover:bg-green-700 transition",onClick:t[0]||(t[0]=s=>u.value=!0)},[e("span",oe," ðŸ›’ "+a(h.value)+" item"+a(h.value>1?"s":""),1),t[4]||(t[4]=e("button",{class:"bg-white text-green-700 font-bold px-4 py-1 rounded-full"}," Checkout ",-1))])):_("",!0)]),_:1}),d(c(P),{open:u.value,"onUpdate:open":t[2]||(t[2]=s=>u.value=s)},{default:i(()=>[d(c(V),{class:"max-w-lg rounded-2xl shadow-lg bg-white p-6"},{default:i(()=>[d(c(A),null,{default:i(()=>[d(c(U),{class:"text-2xl font-semibold text-gray-800"},{default:i(()=>[...t[5]||(t[5]=[k(" Checkout ",-1)])]),_:1})]),_:1}),e("div",ae,[(n(!0),r(S,null,$(b.value,s=>(n(),r("div",{key:s.id,class:"flex items-center gap-4 border-b pb-3"},[s.picture?(n(),r("img",{key:0,src:`/storage/${s.picture}`,class:"h-14 w-14 object-cover rounded-md"},null,8,le)):_("",!0),e("div",ne,[e("p",re,a(s.name),1),e("p",ie,[k(a(l.value[s.id])+" Ã— ",1),e("span",de," KES "+a(s.price),1),e("span",ce," KES "+a(p(s.price)),1)])]),e("p",ue," KES "+a(p(s.price)*l.value[s.id]),1)]))),128)),e("div",fe,[t[6]||(t[6]=e("p",{class:"text-sm text-green-700 font-medium"}," Discount (35% Off) ",-1)),e("p",me," You saved KES "+a(T.value),1)]),e("div",ge,[t[7]||(t[7]=e("span",{class:"font-semibold text-gray-800 text-lg"},"Total:",-1)),e("span",pe," KES "+a(y.value),1)])]),d(c(q),{class:"mt-6 flex justify-end space-x-3"},{default:i(()=>[e("button",{onClick:t[1]||(t[1]=s=>u.value=!1),class:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-5 py-2 rounded-lg font-medium"}," Cancel "),e("button",{onClick:F,disabled:m.value,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold"},a(m.value?"Placing...":"Confirm Order"),9,xe)]),_:1})]),_:1})]),_:1},8,["open"]),d(E,{name:"fade"},{default:i(()=>[g.value?(n(),r("div",_e,a(g.value),1)):_("",!0)]),_:1})])]),_:1}))}},Ne=G(be,[["__scopeId","data-v-08ea8b0e"]]);export{Ne as default};
